function initSampleSeater(){const a=d3.scaleOrdinal(d3.schemeSet1);$(".seat-container").each(function(){$(this).layoutContainer({detailed:!0,labelled:!0,loadable:!1,prefix:"sscnt",on_complete:function(){$("#sample-seater svg.sample.occupied").removeClass("occupied").each(function(){let b=$(".group-selector[data-group=\""+$(this).data("group")+"\"]").data();$(this).find("> .envelope").attr("fill",a(b.selector))})}})}),d3.selectAll(".group-chooser [data-selector]").style("color","black").style("background-color",function(){return a($(this).data("selector"))}).on("click",function(){let a=!$(this).hasClass("selected"),b=$(this).data("group");$(".group-selector.selected").removeClass("selected"),$(this).toggleClass("selected",a),$(".input-group #group-"+b).toggleClass("selected",a)}),$(document).on("click","#sample-seater svg.sample",function(){let b=$(".group-selector.selected").data();b&&($(this).hasClass("empty")?$(this).removeClass("empty").attr("data-group",b.group).find(" > .envelope").attr("fill",a(b.selector)):$(this).addClass("empty").removeAttr("data-group").removeData("group"))}),$(".seater .badge[data-pk]").hover(function(){let b=$(".group-selector.selected").data();b&&$(this).css("background-color",a(b.selector))},function(){let a=$(".group-selector.selected").data();a&&$(this).css("background-color","")}).click(function(){let b=$(".group-selector.selected").data();if(b){let c=$("#seats-for-"+$(this).data("pk")+" svg.sample"),d=c.filter(".empty"),e=c.filter("[data-group="+b.group+"]");0<d.length?d.removeClass("empty").attr("data-group",b.group).find("> .envelope").attr("fill",a(b.selector)):e.addClass("empty").removeAttr("data-group").removeData("group")}}),$("#save-seats").click(function(){let a=[],b=$(this);b.html("<i class=\"ti ti-reload spin\"></i>"),$(".seat-container").each(function(){let b=$(this).data("pk");$(this).find("svg.sample[data-group]").each(function(){a.push({group:$(this).data("group"),container:b,location:$(this).data("loc")})})}),$("input.free-container").each(function(){let b=$(this);for(i=0;i<b.val();i++)a.push({group:b.data("group"),container:b.data("container"),location:null})}),$.ajax({type:"post",dataType:"json",url:b.data("post-action"),data:{samples:JSON.stringify(a)},beforeSend:function(b){b.setRequestHeader("X-CSRFToken",$.cookie("csrftoken")),console.log(a)},success:function(a){a.url?window.location.replace(a.url):window.location.reload()},error:function(){b.shake(),b.html("<i class=\"ti ti-alert\"></i>")}})})}